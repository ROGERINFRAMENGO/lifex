<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life Organizer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- FullCalendar CSS -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet">
    <!-- FullCalendar JS -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
    <script src="https://apis.google.com/js/api.js"></script>
    <style>
        :root {
            --primary-light: #4f46e5;
            --primary-dark: #6366f1;
            --text-light: #1f2937; /* Quase preto */
            --text-dark: #f9fafb;  /* Quase branco */
            --bg-light: #f9fafb;
            --bg-dark: #1e293b;
            --card-light: rgba(255, 255, 255, 0.8);
            --card-dark: rgba(30, 41, 59, 0.8);
            /* Cores para as bordas das colunas de tarefas */
            --column-in-progress: #f59e0b; /* Laranja */
            --column-upcoming: #6366f1;    /* Índigo/Azul */
            --column-recurrent: #10b981;   /* Verde */
            /* Cores para as bordas das colunas de finanças */
            --column-expenses: #ef4444; /* Vermelho */
            --column-income: #22c55e;   /* Verde */
        }

        body {
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
            min-height: 100vh;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        .day-theme {
            background-image: url('https://placehold.co/1920x1080?text=Day+Theme%3A+Bright+sunny+sky+with+white+clouds');
            color: var(--text-light); /* Cor de texto padrão para o tema dia */
            background-color: var(--bg-light);
        }

        .night-theme {
            background-image: url('https://placehold.co/1920x1080?text=Night+Theme%3A+Dark+blue+sky+with+stars+and+moon');
            color: var(--text-dark); /* Cor de texto padrão para o tema noite */
            background-color: var(--bg-dark);
        }

        .card {
            backdrop-filter: blur(10px);
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: transform 0.2s ease;
        }

        .card:hover {
            transform: translateY(-2px);
        }

        /* Estilos para as bordas das colunas de tarefas */
        .column-in-progress { border-left: 4px solid var(--column-in-progress); }
        .column-upcoming { border-left: 4px solid var(--column-upcoming); }
        .column-recurrent { border-left: 4px solid var(--column-recurrent); }

        /* Estilos para as bordas das colunas de finanças */
        .column-expenses { border-left: 4px solid var(--column-expenses); }
        .column-income { border-left: 4px solid var(--column-income); }

        .task-card, .finance-card {
            cursor: grab;
            position: relative;
        }

        .task-card:active, .finance-card:active {
            cursor: grabbing;
        }

        .task-actions, .finance-actions {
            display: none;
            position: absolute;
            right: 8px;
            top: 8px;
        }

        .task-card:hover .task-actions,
        .finance-card:hover .finance-actions {
            display: flex;
        }

        .color-picker {
            display: none;
            position: absolute;
            z-index: 100;
            background: white;
            padding: 0.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .status-menu { /* Renomeado de .status-menu para .card-action-menu para ser mais genérico */
            display: none;
            position: absolute;
            z-index: 100;
            right: 0;
            top: 100%;
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            min-width: 160px;
        }

        .status-menu-item { /* Renomeado de .status-menu-item para .card-action-menu-item */
            padding: 0.5rem 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-menu-item:hover {
            background: #f3f4f6 !important;
        }

        .night-theme .status-menu-item:hover {
            background: #334155 !important;
        }

        .status-menu,
        .status-menu-item {
            background: #fff !important;
            color: #1f2937 !important; /* texto escuro */
        }

        .night-theme .status-menu,
        .night-theme .status-menu-item {
            background: #1e293b !important;
            color: #f9fafb !important; /* texto claro */
        }

        .status-indicator { /* Pode ser removido se não for mais usado */
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 6px;
        }

        /* --- Correções para o texto dos cards --- */
        /* Cor padrão do texto para cards no tema dia */
        .day-theme .task-card h3,
        .day-theme .task-card p,
        .day-theme .task-card .text-gray-600,
        .day-theme .task-card .text-gray-500,
        .day-theme .finance-card h3,
        .day-theme .finance-card p,
        .day-theme .finance-card .text-gray-600,
        .day-theme .finance-card .text-gray-500 {
            color: var(--text-light) !important; /* Garante texto escuro no tema dia */
        }

        /* Cor padrão do texto para cards no tema noite */
        .night-theme .task-card h3,
        .night-theme .task-card p,
        .night-theme .task-card .text-gray-600,
        .night-theme .task-card .text-gray-500,
        .night-theme .finance-card h3,
        .night-theme .finance-card p,
        .night-theme .finance-card .text-gray-600,
        .night-theme .finance-card .text-gray-500 {
            color: var(--text-dark) !important; /* Garante texto claro no tema noite */
        }

        /* Ajuste para o fundo dos cards no tema noite para melhor contraste */
        .night-theme .task-card,
        .night-theme .finance-card {
            background-color: rgba(30, 41, 59, 0.9) !important; /* Fundo mais opaco no modo noturno */
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Ajuste para o texto das categorias no modo noturno */
        .night-theme .task-card .text-indigo-800,
        .night-theme .task-card .text-green-800,
        .night-theme .task-card .text-blue-800,
        .night-theme .task-card .text-purple-800,
        .night-theme .task-card .text-yellow-800,
        .night-theme .task-card .text-pink-800 {
            color: var(--text-dark) !important; /* Garante que o texto da categoria seja claro no tema noite */
        }
        /* Fundo das pílulas de categoria no modo noturno */
        .night-theme .task-card .bg-indigo-100,
        .night-theme .task-card .bg-green-100,
        .night-theme .task-card .bg-blue-100,
        .night-theme .task-card .bg-purple-100,
        .night-theme .task-card .bg-yellow-100,
        .night-theme .task-card .bg-pink-100 {
            background-color: rgba(17, 24, 39, 0.7) !important; /* Fundo mais escuro para pílulas no tema noite */
        }

        #financeChart {
  background: transparent;
}
    </style>
</head>
<body class="day-theme">
    <!-- Tela de Login -->
    <div id="login-screen" class="flex items-center justify-center p-4 fixed inset-0 z-50">
        <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-2xl w-full max-w-md">
            <div class="text-center mb-8">
                <img src="https://placehold.co/100x100?text=LOGO" alt="Logo Life Organizer" class="mx-auto mb-4 rounded-lg">
                <h1 class="text-3xl font-bold text-gray-800 dark:text-white">Life Organizer</h1>
                <p class="text-gray-600 dark:text-gray-300">Acesso pessoal</p>
            </div>
            
            <form id="login-form">
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Senha de Acesso</label>
                    <div class="relative">
                        <input 
                            type="password" 
                            id="password" 
                            class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition"
                            placeholder="Digite sua senha"
                            autocomplete="current-password"
                            required
                        >
                    </div>
                </div>
                
                <button 
                    type="submit" 
                    class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-4 rounded-lg transition flex items-center justify-center"
                >
                    <i class="fas fa-lock mr-2"></i>
                    Acessar
                </button>
                
                <div id="error-message" class="text-red-500 text-sm text-center hidden">
                    Senha incorreta. Tente novamente.
                </div>
            </form>
        </div>
    </div>

    <!-- Conteúdo Principal -->
    <div id="app-content" class="hidden">
        <!-- Header -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-8 bg-white/80 dark:bg-gray-800/80 p-6 rounded-xl backdrop-blur-lg">
            <div class="text-center md:text-left mb-4 md:mb-0">
                <h1 class="text-3xl font-bold text-gray-800 dark:text-white">Life Organizer</h1>
                <p id="greeting" class="text-lg text-gray-600 dark:text-gray-300">bom dia, Rodrigo</p>
            </div>
            
            <div class="flex flex-col sm:flex-row gap-4 items-center">
                <div class="flex items-center gap-2 bg-white/50 dark:bg-black/30 p-3 rounded-lg">
                    <div id="clock" class="text-xl font-semibold text-gray-800 dark:text-white">00:00:00</div>
                    <div id="date" class="text-sm text-gray-600 dark:text-gray-300">Brasil</div>
                </div>
                
                <div class="flex items-center gap-2 bg-white/50 dark:bg-black/30 p-3 rounded-lg">
                    <span id="weather-icon" class="text-xl">⏳</span>
                    <div>
                        <div id="temperature" class="font-semibold text-gray-800 dark:text-white">--°C</div>
                        <div id="weather-desc" class="text-xs text-gray-600 dark:text-gray-300">São Paulo</div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            <!-- Tasks Board -->
            <div class="lg:col-span-3 grid grid-cols-1 md:grid-cols-3 gap-4">
                <!-- Column 1: Em Andamento -->
                <div class="board-column bg-white/50 dark:bg-gray-800/50 p-4 rounded-xl">
                    <h2 class="text-xl font-semibold mb-4 flex items-center gap-2 text-gray-800 dark:text-white">
                        <span class="p-2 rounded-lg bg-yellow-100 dark:bg-yellow-900 text-yellow-600 dark:text-yellow-300">
                            <i class="fas fa-spinner"></i>
                        </span>
                        Em Andamento
                    </h2>
                    <div class="space-y-3 task-list" id="in-progress-task-list">
                        <!-- Cards serão adicionados aqui -->
                    </div>
                    <button onclick="addNewCard('in-progress-task-list')" class="mt-3 w-full py-2 text-center text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition">
                        <i class="fas fa-plus mr-1"></i> Adicionar tarefa
                    </button>
                </div>
                
                <!-- Column 2: Por Vir -->
                <div class="board-column bg-white/50 dark:bg-gray-800/50 p-4 rounded-xl">
                    <h2 class="text-xl font-semibold mb-4 flex items-center gap-2 text-gray-800 dark:text-white">
                        <span class="p-2 rounded-lg bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300">
                            <i class="fas fa-hourglass-half"></i>
                        </span>
                        Por Vir
                    </h2>
                    <div class="space-y-3 task-list" id="upcoming-task-list">
                        <!-- Cards serão adicionados aqui -->
                    </div>
                    <button onclick="addNewCard('upcoming-task-list')" class="mt-3 w-full py-2 text-center text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition">
                        <i class="fas fa-plus mr-1"></i> Adicionar tarefa
                    </button>
                </div>
                
                <!-- Column 3: Recorrentes -->
                <div class="board-column bg-white/50 dark:bg-gray-800/50 p-4 rounded-xl">
                    <h2 class="text-xl font-semibold mb-4 flex items-center gap-2 text-gray-800 dark:text-white">
                        <span class="p-2 rounded-lg bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-300">
                            <i class="fas fa-redo"></i>
                        </span>
                        Recorrentes
                    </h2>
                    <div class="space-y-3 task-list" id="recurrent-task-list">
                        <!-- Cards serão adicionados aqui -->
                    </div>
                    <button onclick="addNewCard('recurrent-task-list')" class="mt-3 w-full py-2 text-center text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition">
                        <i class="fas fa-plus mr-1"></i> Adicionar tarefa
                    </button>
                </div>
            </div>
            
            <!-- Sidebar -->
            <div class="space-y-6">
                <!-- Weekly Weather -->
                <div class="bg-white/50 dark:bg-gray-800/50 p-4 rounded-xl">
                    <h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-white">Previsão Semanal</h2>
                    <div class="space-y-3" id="weekly-weather">
                        <!-- Previsão será carregada aqui -->
                    </div>
                </div>
                
                <!-- Quick Notes -->
                <div class="bg-white/50 dark:bg-gray-800/50 p-4 rounded-xl">
                    <h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-white">Anotações Rápidas</h2>
                    <div class="flex flex-col gap-2 mb-3">
                        <input type="text" id="new-note-title-input" class="w-full p-2 bg-white/80 dark:bg-gray-700/80 rounded-lg border border-gray-200 dark:border-gray-600 focus:border-indigo-500 focus:ring-indigo-500" placeholder="Título da anotação...">
                        <textarea id="new-note-description-input" class="w-full p-2 bg-white/80 dark:bg-gray-700/80 rounded-lg border border-gray-200 dark:border-gray-600 focus:border-indigo-500 focus:ring-indigo-500" placeholder="Descrição da anotação..."></textarea>
                        <button onclick="addNote()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-4 rounded-lg transition">
                            <i class="fas fa-plus mr-1"></i> Adicionar Anotação
                        </button>
                    </div>
                    <div id="notes-list" class="space-y-2">
                        <!-- Anotações serão carregadas aqui -->
                    </div>
                </div>
            </div>
        </main>

        <!-- Seção de Finanças -->
        <div class="col-span-1 lg:col-span-4 grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
            <!-- Painel de Saldo -->
            <div class="md:col-span-1 bg-white/80 dark:bg-gray-800/80 p-6 rounded-xl flex flex-col items-center justify-center">
                <h2 class="text-xl font-semibold mb-2 text-gray-800 dark:text-white">Saldo Total</h2>
                <div class="flex items-center gap-2">
                    <span class="text-3xl font-bold text-green-600 dark:text-green-400" id="total-balance">R$ 0,00</span>
                    <button onclick="editBalance()" class="ml-2 text-gray-500 hover:text-indigo-600">
                        <i class="fas fa-pen"></i>
                    </button>
                </div>
            </div>
            <!-- Coluna Gastos -->
            <div class="bg-white/50 dark:bg-gray-800/50 p-4 rounded-xl">
                <h2 class="text-xl font-semibold mb-4 flex items-center gap-2 text-red-600 dark:text-red-400">
                    <i class="fas fa-arrow-down"></i> Gastos
                </h2>
                <div class="space-y-3 finance-list" id="expenses-list">
                    <!-- Cards de gastos -->
                </div>
                <button onclick="addFinanceCard('expenses-list')" class="mt-3 w-full py-2 text-center text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition">
                    <i class="fas fa-plus mr-1"></i> Adicionar gasto
                </button>
            </div>
            <!-- Coluna Ganhos -->
            <div class="bg-white/50 dark:bg-gray-800/50 p-4 rounded-xl">
                <h2 class="text-xl font-semibold mb-4 flex items-center gap-2 text-green-600 dark:text-green-400">
                    <i class="fas fa-arrow-up"></i> Ganhos
                </h2>
                <div class="space-y-3 finance-list" id="income-list">
                    <!-- Cards de ganhos -->
                </div>
                <button onclick="addFinanceCard('income-list')" class="mt-3 w-full py-2 text-center text-sm text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition">
                    <i class="fas fa-plus mr-1"></i> Adicionar ganho
                </button>
            </div>
        </div>

        <div class="w-full flex justify-center my-8">
          <div class="bg-white/80 dark:bg-gray-800/80 rounded-xl p-6 shadow-lg" style="max-width:400px; width:100%;">
            <canvas id="financeChart" style="height:260px;max-width:100%;"></canvas>
          </div>
        </div>

        <!-- Calendário -->
        <section class="glass p-6 mb-8 rounded-2xl">
          <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
            <i class="fas fa-calendar-alt text-indigo-600"></i> Calendário
          </h2>
          <div id="calendar"></div>
        </section>
      <button onclick="authenticateGoogleCalendar()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg mt-4">
  Sincronizar com Google Calendar
</button>
    </div>

    <script src="script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>
<script>
    const loginForm = document.getElementById('login-form');
    const passwordInput = document.getElementById('password');
    const errorMessage = document.getElementById('error-message');

    if (loginForm) {
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            console.log('Tentando logar...'); // <-- Adicione isto
            const password = passwordInput.value;
            // ...restante do código
        });
    }
</script>
